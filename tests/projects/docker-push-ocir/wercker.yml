build:
  box: golang
  steps:
    - script:
        name: Build
        code: go build -o app
    - script:
        name: Test
        code: go test ./...     
    - internal/docker-push: # this test must be run with --docker-local so it doesn't actually push to a remote registry
        entrypoint: /pipeline/source/app
        username: odx-pipelines/wercker-ocir-test
        password: rZevP](E1!O9wOTVMw-{
        registry: https://iad.ocir.io/v2/
        repository: odx-pipelines/wercker-ocir-test/test-docker-push-ocir
        tag: latest
        env: "foo=val1 bar='Three word value'"
        labels: "Label1=value1 'Three word key'=value2 Label3='Three word value'"


